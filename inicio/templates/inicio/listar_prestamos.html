{% extends "base.html" %}

{% block title %}Listado de Préstamos{% endblock %}

{% block content %}
<h2>Listado de Préstamos</h2>

<form method="get">
  <input type="text" name="q" placeholder="Buscar socio o libro" value="{{ q }}">
  <button type="submit">Buscar</button>
</form>

<table border="1" cellpadding="6">
  <tr>
    <th>Socio</th>
    <th>Libro</th>
    <th>Fecha préstamo</th>
    <th>Devuelto</th>
    <th>Fecha devolución</th>
  </tr>
  {% for p in prestamos %}
    <tr>
      <td>{{ p.socio.nombre }} {{ p.socio.apellido }}</td>
      <td>{{ p.libro.titulo }}</td>
      <td>{{ p.fecha_prestamo }}</td>
      <td>{{ p.devuelto|yesno:"Sí,No" }}</td>
      <td>{{ p.fecha_devolucion|default:"-" }}</td>
    </tr>
  {% empty %}
    <tr><td colspan="5">No hay préstamos registrados.</td></tr>
  {% endfor %}
</table>
{% endblock %}
